<policy xmlns="http://www.mulesoft.org/schema/mule/policy" xmlns:mule="http://www.mulesoft.org/schema/mule/core" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xmlns:api-platform-gw="http://www.mulesoft.org/schema/mule/api-platform-gw" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"        
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/policy http://www.mulesoft.org/schema/mule/policy/current/mule-policy.xsd 
						http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd			
						http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd	
						http://www.mulesoft.org/schema/mule/api-platform-gw http://www.mulesoft.org/schema/mule/api-platform-gw/current/mule-api-platform-gw.xsd">
 
  <!-- WSS SOAP SAML assertion policy -->
  <!-- Validates incoming messages containing SAML assertions -->
    
  <before>			
	<mule:byte-array-to-string-transformer/>		
	
	<cxf:proxy-service payload="envelope">            		    
		<cxf:ws-security>	
			<cxf:ws-config>
				<cxf:property key="action" value="SAMLTokenUnsigned Signature"/>					
				<cxf:property key="signaturePropFile" value="{{ crypto-file-path }}"/>					
			</cxf:ws-config>	            
		</cxf:ws-security>		
	</cxf:proxy-service>
		
  </before>
  	 
  <!-- Pointcuts specify where this policy takes effect. It refers to an specific Api and Version -->	 
  <pointcut>
      <api-platform-gw:api-pointcut apiName="{{ apiName }}" apiVersion="{{ apiVersionName }}"/>
  </pointcut>
   
</policy>